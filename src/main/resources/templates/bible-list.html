<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Step 1189 | ì„±ê²½ ëª©ë¡</title>
    <style>
        body { font-family: 'Inter', sans-serif; background: #0f172a; color: #f8fafc; margin: 0; padding: 20px; }
        .container { max-width: 1000px; margin: 0 auto; }
        h1 { color: #38bdf8; text-align: center; margin-bottom: 30px; }

        /* êµ¬ì•½/ì‹ ì•½ êµ¬ë¶„ íƒ­ ëŠë‚Œ */
        .section-title { font-size: 1.5rem; color: #94a3b8; border-bottom: 2px solid #334155; padding-bottom: 10px; margin: 40px 0 20px; }

        /* ê·¸ë¦¬ë“œ ë ˆì´ì•„ì›ƒ */
        .bible-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 15px;
        }

        /* ì„±ê²½ ì¹´ë“œ ìŠ¤íƒ€ì¼ */
        .bible-card {
            background: #1e293b;
            padding: 15px;
            border-radius: 12px;
            text-align: center;
            cursor: pointer;
            transition: 0.3s;
            border: 1px solid #334155;
        }
        .bible-card:hover { border-color: #38bdf8; transform: translateY(-3px); background: #2d3e5a; }
        .bible-name { font-weight: bold; font-size: 1.1rem; display: block; }
        .bible-eng { font-size: 0.8rem; color: #64748b; }

        /* ì¥ ì„ íƒ ë ˆì´ì–´ (ëª¨ë‹¬ì´ë‚˜ ë“œë¡­ë‹¤ìš´ ëŒ€ì‹  ê°„ë‹¨í•˜ê²Œ êµ¬í˜„) */
        .chapter-container {
            display: none;
            background: #0f172a;
            grid-column: 1 / -1;
            padding: 20px;
            border-radius: 15px;
            border: 1px dashed #38bdf8;
            margin-top: 10px;
        }
        .chapter-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(45px, 1fr)); gap: 8px; }
        .chapter-btn {
            background: #334155; color: white; border: none; padding: 8px;
            border-radius: 6px; cursor: pointer; font-size: 0.9rem;
        }
        .chapter-btn:hover { background: #38bdf8; color: #0f172a; }
        .active { display: block !important; }
    </style>
</head>
<body>
<div class="container">
    <h1>Step 1189 ì„±ê²½ ì½ê¸° ğŸ“–</h1>

    <div class="section-title">êµ¬ì•½ ì„±ê²½ (Old Testament)</div>
    <div class="bible-grid">
        <div th:each="bible : ${bibles}" th:if="${bible.testament.name() == 'OLD'}" class="bible-card"
             th:onclick="'toggleChapters(' + ${bible.id} + ')'">
            <span class="bible-name" th:text="${bible.korName}">ì°½ì„¸ê¸°</span>
            <span class="bible-eng" th:text="${bible.engName}">Genesis</span>

            <div th:id="'chapters-' + ${bible.id}" class="chapter-container">
                <p th:text="${bible.korName} + ' ì¥ ì„ íƒ'"></p>
                <div class="chapter-grid">
                    <button th:each="i : ${#numbers.sequence(1, bible.totalChapter)}"
                            class="chapter-btn"
                            th:text="${i}"
                            th:onclick="|recordProgress(${bible.id}, ${i})|">
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div class="section-title">ì‹ ì•½ ì„±ê²½ (New Testament)</div>
    <div class="bible-grid">
        <div th:each="bible : ${bibles}" th:if="${bible.testament.name() == 'NEW'}" class="bible-card"
             th:onclick="'toggleChapters(' + ${bible.id} + ')'">
            <span class="bible-name" th:text="${bible.korName}">ë§ˆíƒœë³µìŒ</span>
            <span class="bible-eng" th:text="${bible.engName}">Matthew</span>

            <div th:id="'chapters-' + ${bible.id}" class="chapter-container">
                <p th:text="${bible.korName} + ' ì¥ ì„ íƒ'"></p>
                <div class="chapter-grid">
                    <button th:each="i : ${#numbers.sequence(1, bible.totalChapter)}"
                            class="chapter-btn" th:text="${i}"
                            th:onclick="|recordProgress(${bible.id}, ${i})|">
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<script th:inline="javascript">
    // ì„±ê²½ í´ë¦­ ì‹œ ì¥ ëª©ë¡ ë³´ì—¬ì£¼ê¸°
    function toggleChapters(id) {
        const container = document.getElementById('chapters-' + id);
        const allContainers = document.querySelectorAll('.chapter-container');

        // ë‹¤ë¥¸ ê²Œ ì—´ë ¤ìˆìœ¼ë©´ ë‹«ê¸°
        allContainers.forEach(c => {
            if(c.id !== 'chapters-' + id) c.classList.remove('active');
        });

        container.classList.toggle('active');
        event.stopPropagation(); // ì¹´ë“œ í´ë¦­ ì´ë²¤íŠ¸ê°€ ë²„íŠ¼ê¹Œì§€ ì „ë‹¬ë˜ì§€ ì•Šê²Œ ë°©ì§€
    }

    // ì‹¤ì œ ì²´í¬ ê¸°ë¡ API í˜¸ì¶œ (ë‚˜ì¤‘ì— êµ¬í˜„í•  ë¶€ë¶„)
    function recordProgress(bibleId, chapter) {
        alert(bibleId + 'ë²ˆ ì„±ê²½ ' + chapter + 'ì¥ì„ ì½ìœ¼ì…¨êµ°ìš”! ê¸°ë¡ì„ ì‹œì‘í•©ë‹ˆë‹¤.');
        // ì—¬ê¸°ì„œ fetch() ë“±ì„ ì´ìš©í•´ ì„œë²„ì— ë°ì´í„°ë¥¼ ë³´ë‚¼ ê±°ì•¼!
    }
</script>
</body>
</html>